---
title: 20240404-dp-6
date: 2024-04-03 14:21:35
tags:
---

## dp day-6 完全背包

### 1. 完全背包理论基础

和01背包的区别主要就是：
01背包是先遍历物品后遍历背包，而且遍历背包是从后往前遍历
- 遍历顺序：完全背包在遍历背包是是正序，不是倒序，因为前面的可以往里面添加无数次
- 内外遍历顺序：可以交换，先遍历背包，后遍历物品

先遍历物品，再遍历背包（无参版）
```python
def test_CompletePack():
    weight = [1, 3, 4]
    value = [15, 20, 30]
    bagWeight = 4
    dp = [0] * (bagWeight + 1)
    for i in range(len(weight)):  # 遍历物品
        for j in range(weight[i], bagWeight + 1):  # 遍历背包容量
            dp[j] = max(dp[j], dp[j - weight[i]] + value[i])
    print(dp[bagWeight])

test_CompletePack()
```

先遍历背包，再遍历物品（无参版）
```python
def test_CompletePack():
    weight = [1, 3, 4]
    value = [15, 20, 30]
    bagWeight = 4

    dp = [0] * (bagWeight + 1)

    for j in range(bagWeight + 1):  # 遍历背包容量
        for i in range(len(weight)):  # 遍历物品
            if j - weight[i] >= 0:
                dp[j] = max(dp[j], dp[j - weight[i]] + value[i])

    print(dp[bagWeight])

test_CompletePack()

```

### 2. 零钱兑换II #518

思路：
- 是求的是dp[j]：凑成总金额j的货币组合数为dp[j]
- 递推公式和dp[j] += dp[j-coins[i]], 这个公式可以看分割等和子集 #416
- 重点是初始化dp[0]=1,不考虑dp[0]的含义，其实可以理解为背包为0的方法只有什么都不放一种（有点牵强）
- 遍历顺序很重要：
    - 先遍历物品，后遍历背包得到的是组合数，无顺序，（1，2）
    - 先遍历背包，后遍历物品得到的排列数，有顺序（1，2），（2，1）

```python
class Solution:
    def change(self, amount: int, coins: List[int]) -> int:
        # 定义dp数组,amount背包容量，dp[j]：凑成总金额j的货币组合数为dp[j]
        dp = [0]*(amount+1)
        # 初始化
        dp[0] = 1
        # 先遍历物品，后遍历背包,顺序不能反
        for i in coins:
            for j in range(i, amount+1):
                dp[j] += dp[j-i] 
        print(dp)

        return dp[amount]
```


### 3. 组合总和IV #377

思路：
- 根上一题是一个类似题，而且上面有讲遍历顺序决定，结果是组合还是排序，所以很好做
- 其他条件都是一样的

```python
class Solution:
    def combinationSum4(self, nums: List[int], target: int) -> int:
        # 定义dp数组，dp[j]代表组合成j的个数
        dp = [0] * (target+1)

        # 有争议的初始化
        dp[0] = 1

        # 遍历顺序，因为是求排列，先遍历背包，再遍历物品
        for j in range(0, target+1):
            for num in nums:
                if j >= num:
                    dp[j] += dp[j-num]
        print(dp)
        return dp[target]
```

